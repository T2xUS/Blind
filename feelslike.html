<!DOCTYPE html>
<html>
	<head>
		<title>But what does it feel like?</title>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>

			//$(document).ready(function(){

				var dateTime = new Date();
				var currentEpoch = dateTime.getTime(); //http://en.wikipedia.org/wiki/Unix_time

				//set up an empty api object to store all of your information in
				var api = {};

				//set specific properties :TODO Add prompt to get from user
					api.key = "";
					api.state = "NY";
					api.city = "Manhattan";

				//use string concatenation to create the full url
				//http://api.wunderground.com/api/asdfadsf1234/hourly/q/NY/Brooklyn.json
					// api.hourly = "http://api.wunderground.com/api/"+api.key+"/hourly/q/"+api.state+"/"+api.city+".json";
					api.conditions = "http://cooper-union-weather-proxy.herokuapp.com/weather/"+api.state+"/"+api.city;

				//take a look at the object by using console.log(api)
				console.log(api);
			//});
			var feelslike;
			function getWeather() {
				document.getElementById("info").innerHTML = "";
				document.getElementById("feel").style.visibility = "visible";
				//Request data remotely from the api
				//note that the url parameter uses one of the urls stored in the api object
				$.ajax({
				  type: 'GET',
				  dataType: 'json',
				  url: api.conditions,
				  success: function(response){

				  	//here's where all of your fun code goes!
						//the variable "response" is now a json object containing all of your results
						console.log(response);
						$('#info').append("Weather conditions for " + response.current_observation.display_location.full + " at " + response.current_observation.observation_time_rfc822 + ". " + "Temperature: " + response.current_observation.temperature_string + ", "+ "Overall: " + response.current_observation.weather + ", "+ "Wind strentgh and chill factor: " + response.current_observation.wind_string + " chill: " + response.current_observation.windchill_string + ","+ "Humidity: " + response.current_observation.relative_humidity);
						
						feelslike = response.current_observation.feelslike_string;
				  }
				});
			}
			function getFeels() {
				document.getElementById("feel").innerHTML = "";
				var guess = prompt("But what does it feel like?");
				document.getElementById("feel").innerHTML = "It feels like " + feelslike + ". Your guess: " + guess;
			}
		</script>
	</head>
	<body>
		<h1 id="output">You awaken and consider venturing outside your cosy cocoon of blankets. As you reluctantly ready yourself to face the cruel, harsh world, you find yourself with one question. What's the weather like today?</h1>
		<div id="info"><button type="info" onclick="getWeather()">Tell me!</button></div>
		<div id="feel" style="visibility: hidden;"><button type="info" onclick="getFeels()">But what does it feel like?</button></div>
	</body>
</html>
